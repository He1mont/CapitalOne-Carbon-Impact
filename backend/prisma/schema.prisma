generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model account {
  id        Int    @id @default(autoincrement())
  accountID String @unique
  username  String @unique
  firstName String 
  lastName  String 
  email     String @unique
  phone     String
  address   String
  currency  String 
  state     String 
  colorMode Int
  
  transactions   transaction[]
  followings     following[]
  goals userGoals[]

}

model transaction {
  id              Int     @id @default(autoincrement())
  transactionUUID String  @unique
  accountID       String  
  merchantName    String
  category        String
  currency        String
  amount          Float
  status          String
  indicator       String
  date            DateTime
  carbonScore     Float

  account         account @relation(fields: [accountID], references: [accountID])
}

model following {
  id            Int     @id @default(autoincrement())
  accountID     String
  followingID   String

  @@unique([accountID, followingID], name: "Unique_accountID_followingID")
  account       account @relation(fields: [followingID], references: [accountID])
}

model userGoals {
  id        Int     @id @default(autoincrement())
  accountID String  
  goal      String
  year      String
  month     String

  @@unique([year, month], name: "Unique_year_month")
  account       account @relation(fields: [accountID], references: [accountID])
}